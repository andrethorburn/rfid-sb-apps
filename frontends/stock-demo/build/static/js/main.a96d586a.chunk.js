(this["webpackJsonpstock-demo"]=this["webpackJsonpstock-demo"]||[]).push([[0],{52:function(e,t){e.exports="data:image/png;base64,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"},57:function(e,t,a){e.exports=a(97)},91:function(e,t){},94:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),l=a.n(c),o=a(24),s=a(33),u=a(51),m=a.n(u);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i=[{code:0,name:"Blue",color:"#5da5da"},{code:1,name:"Orange",color:"#faa43a"},{code:2,name:"Green",color:"#60bd68"},{code:3,name:"Pink",color:"#f17cb0"},{code:4,name:"Purple",color:"#b276b2"}],b={websocket:{connected:!1,error:null,socket:null},readerCount:0,readers:{},tags:{},skus:i.map((function(e){return E({},e,{count:0})}))},k=Object(r.createContext)(b),A=k.Provider,h=function(e){var t="",a=!0,r=!1,n=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){t+=("0"+(255&c.value).toString(16)).slice(-2)}}catch(o){r=!0,n=o}finally{try{a||null==l.return||l.return()}finally{if(r)throw n}}return t},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":";return h(e).replace(/(.{2})/g,"$1".concat(t)).slice(0,-1)},f=function(e){var t=e.children,a=Object(r.useReducer)((function(e,t){switch(t.type){case"websocket.connected":return E({},e,{websocket:E({},e.websocket,{connected:!0,socket:t.socket})});case"websocket.disconnected":return E({},e,{websocket:E({},e.websocket,{connected:!1,socket:null})});case"websocket.error":return E({},e,{websocket:E({},e.websocket,{error:t.error})});case"mesh.rfid.tag_update":var a=function(e){e.type;var t=e.data,a=m()(t.timestamp),r=y(t.macAddress);return{tags:t.items.reduce((function(e,t){var n=y(t),c=function(e){return e[0]%5}(t);return e[n]={timestamp:a,macAddress:r,tag:n,sku:c},e}),{}),reader:{timestamp:a,macAddress:r}}}(t),r=a.tags,n=a.reader,c=E({},e.tags,{},r),l=e.readerCount,o=function(e){for(var t=e.tags,a=e.readers,r=i.map((function(e){return E({},e,{count:0})})),n=Object.keys(a).reduce((function(e,t){return e[t]=E({},a[t],{count:0}),e}),{}),c=0,l=Object.keys(t);c<l.length;c++){var o=l[c];r[t[o].sku].count++,n[t[o].macAddress].count++}return{skus:r,readers:n}}({tags:c,readers:e.readers[n.macAddress]?E({},e.readers):E({},e.readers,Object(s.a)({},n.macAddress,E({},n,{name:"Reader #".concat(++l)})))}),u=o.skus;return E({},e,{readers:o.readers,tags:c,skus:u,readerCount:l});default:return console.warn("Unexpected action type: ".concat(t.type),t),e}}),b),c=Object(o.a)(a,2),l=c[0],u=c[1];return n.a.createElement(A,{value:{state:l,dispatch:u}},t)},g=a(34),p=a.n(g),C=a(55),v=a(7),N=a(8),Q=a(10),I=a(35),O=a(26),w=a(56),S=a(54),R=a(52),B=a.n(R),G=(a(94),function(e){var t=e.sku;return n.a.createElement(Q.a,{className:"dashboard--card"},n.a.createElement(Q.a.Header,{as:"h5",style:{color:t.color},className:"dashboard--card--title"},t.name),n.a.createElement(Q.a.Body,null,n.a.createElement("h1",{style:{color:t.color},className:"dashboard--card--number"},t.count),n.a.createElement("h5",{style:{color:t.color},className:"dashboard--card--number--unit"},"TAGS")))}),U=function(e){var t=e.reader;return n.a.createElement(Q.a,{className:"dashboard--card"},n.a.createElement(Q.a.Header,{as:"h5",style:{color:t.color},className:"dashboard--card--title"},t.name),n.a.createElement(Q.a.Body,null,n.a.createElement("h1",{style:{color:t.color},className:"dashboard--card--number"},t.count),n.a.createElement("h5",{className:"dashboard--card--number--unit"},"TAGS")))},V=function(e){var t=e.sku;return n.a.createElement(S.a,{variant:"secondary",className:"dashboard--badge--sku",style:{backgroundColor:t.color}},t.name)},F=function(){var e=function(){var e=Object(r.useContext)(k),t=e.dispatch;return Object(r.useEffect)((function(){var e=p()();return e.on("connect",(function(){t({type:"websocket.connected",socket:e})})),e.on("disconnect",(function(){t({type:"websocket.disconnected",socket:e})})),e.on("error",(function(e){console.error("Websocket error",e),t({type:"websocket.error",error:e})})),e.on("mesh.rfid.tag_update",(function(e){t({type:"mesh.rfid.tag_update",data:e})})),function(){e.close()}}),[t]),[e]}(),t=Object(o.a)(e,1)[0].state,a=t.websocket,c=t.tags,l=t.readers,s=t.skus,u=t.readerCount;return n.a.createElement("div",{className:"app"},n.a.createElement(O.a,{bg:"light",expand:"lg",className:"page--header"},n.a.createElement(O.a.Brand,{href:"/"},n.a.createElement("img",{src:B.a,alt:"IoTechnics Logo",className:"page--header--logo"})),n.a.createElement(O.a.Text,{className:"justify-content-end page--header--text"},"RFID Stock Demo")),n.a.createElement(C.a,{className:"p-4 page--content"},!a.connected&&n.a.createElement(v.a,null,n.a.createElement(N.a,null,n.a.createElement(I.a,{variant:"danger",className:"text-center"},"Connection to server lost, please check the API is running and accessible"))),!u&&n.a.createElement(v.a,null,n.a.createElement(N.a,null,n.a.createElement(I.a,{variant:"info",className:"text-center"},"Waiting for RFID updates..."))),!!u&&n.a.createElement(n.a.Fragment,null,n.a.createElement(v.a,null,n.a.createElement(N.a,null,n.a.createElement("h1",{className:"text-center"},"PRODUCT SKUS"),n.a.createElement("hr",null))),n.a.createElement(v.a,null,s.map((function(e){return n.a.createElement(N.a,{key:e.code,sm:6,md:4,className:"mb-4"},n.a.createElement(G,{sku:e}))}))),n.a.createElement(v.a,null,n.a.createElement(N.a,null,n.a.createElement("h1",{className:"text-center"},"READERS"),n.a.createElement("hr",null))),n.a.createElement(v.a,null,Object.keys(l).map((function(e){var t=l[e];return n.a.createElement(N.a,{key:t.macAddress,sm:6,md:4,className:"mb-4"},n.a.createElement(U,{reader:t}))}))),n.a.createElement(v.a,null,n.a.createElement(N.a,null,n.a.createElement("h1",{className:"text-center"},"TAGS"),n.a.createElement("hr",null))),n.a.createElement(v.a,null,n.a.createElement(N.a,null,n.a.createElement(w.a,{bordered:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"TAG"),n.a.createElement("th",null,"SKU"),n.a.createElement("th",null,"READER"),n.a.createElement("th",null,"LAST UPDATE"))),n.a.createElement("tbody",null,Object.keys(c).map((function(e){var t=c[e];return n.a.createElement("tr",{key:t.tag},n.a.createElement("td",null,t.tag),n.a.createElement("td",null,n.a.createElement(V,{sku:s[t.sku]})),n.a.createElement("td",null,l[t.macAddress].name),n.a.createElement("td",null,t.timestamp.calendar()))})))))))))},Z=function(){return n.a.createElement(f,null,n.a.createElement(F,null))};l.a.render(n.a.createElement(Z,null),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.a96d586a.chunk.js.map