(this["webpackJsonpmesh-viewer"]=this["webpackJsonpmesh-viewer"]||[]).push([[0],{101:function(e,t){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),s=a(16),o=a(48),m=a(64),i=a(45),u=a.n(i);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={websocket:{connected:!1,error:null,socket:null},messages:[],maxMessages:25},y=Object(n.createContext)(p),b=y.Provider,h=function(e,t){return e.slice(0,Math.min(e.length,t))},f=function(e){var t="",a=!0,n=!1,r=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){t+=("0"+(255&c.value).toString(16)).slice(-2)}}catch(s){n=!0,r=s}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return t},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":";return f(e).replace(/(.{2})/g,"$1".concat(t)).slice(0,-1)},A=function(e){var t=e.type,a=e.data,n=g(a.macAddress);return{id:"".concat(t,"--").concat(n,"--").concat(a.timestamp),timestamp:u()(a.timestamp),macAddress:n,items:a.items.map((function(e){return g(e)})).sort()}},k=function(e){var t=e.type,a=e.data,n=a.macAddress,r=a.srcPort,c=a.dstPort,l=a.timestamp,s=a.data,o=g(n),m=g(s," ");return{id:"".concat(t,"--").concat(o,"--").concat(l),timestamp:u()(l),macAddress:o,srcPort:r,dstPort:c,data:m}},N=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"websocket.connected":return d({},e,{websocket:d({},e.websocket,{connected:!0,socket:t.socket})});case"websocket.disconnected":return d({},e,{websocket:d({},e.websocket,{connected:!1,socket:null})});case"websocket.error":return d({},e,{websocket:d({},e.websocket,{error:t.error})});case"mesh.notif":return d({},e,{messages:h([{type:t.type,data:k(t)}].concat(Object(o.a)(e.messages)),e.maxMessages)});case"mesh.rfid.tag_update":return d({},e,{messages:h([{type:t.type,data:A(t)}].concat(Object(o.a)(e.messages)),e.maxMessages)});default:return console.warn("Unexpected action type: ".concat(t.type),t),e}}),p),c=Object(s.a)(a,2),l=c[0],m=c[1];return r.a.createElement(b,{value:{state:l,dispatch:m}},t)},C=a(46),v=a.n(C),Q=a(22),w=a(17),O=a(9),I=a(47),S=a(38),M=a(13),x=a(31),B=a(11),V={"mesh.rfid.tag_update":function(e){e.type;var t=e.data,a=t.macAddress,c=t.timestamp,l=t.items,o=Object(n.useState)(!1),m=Object(s.a)(o,2),i=m[0],u=m[1];return r.a.createElement(M.a,{className:"list-item"},r.a.createElement(M.a.Header,{className:"list-item--header"},r.a.createElement(Q.a,{fluid:!0},r.a.createElement(w.a,{noGutters:!0},r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("h1",null,"RFID Tag Update")),r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("h2",null,a," \ud83e\udc7a ",l.length," tags")),r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("span",{className:"list-item--header--date"},c.format("DD/MM/YYYY HH:mm:ss")))))),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,null,"RFID Tags:"),r.a.createElement("ul",null,l.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("pre",{className:"mb-0"},e))}))),r.a.createElement("div",{className:"text-right"},r.a.createElement(x.a,{variant:"primary",onClick:function(){return u(!i)}},"View JSON...")),r.a.createElement(B.a,{show:i,onHide:function(){return u(!i)},size:"lg",centered:!0},r.a.createElement(B.a.Header,{closeButton:!0},r.a.createElement(B.a.Title,null,"JSON")),r.a.createElement(B.a.Body,null,r.a.createElement("pre",null,r.a.createElement("code",null,JSON.stringify(t,null,2)))))))},unknown:function(e){e.type;var t=e.data,a=t.macAddress,c=t.timestamp,l=t.srcPort,o=t.dstPort,m=t.data,i=Object(n.useState)(!1),u=Object(s.a)(i,2),E=u[0],d=u[1];return r.a.createElement(M.a,{className:"list-item"},r.a.createElement(M.a.Header,{className:"list-item--header"},r.a.createElement(Q.a,{fluid:!0},r.a.createElement(w.a,{noGutters:!0},r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("h1",null,"SmartMesh Notification")),r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("h2",null,a)),r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("span",{className:"list-item--header--date"},c.format("DD/MM/YYYY HH:mm:ss")))))),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,null,"Message Information:"),r.a.createElement("table",{className:"table mt-2"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Source Port:"),r.a.createElement("td",null,l," ",r.a.createElement("small",{className:"text-muted"},"( 0x",l.toString(16)," )"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Destination Port:"),r.a.createElement("td",null,o," ",r.a.createElement("small",{className:"text-muted"},"( 0x",o.toString(16)," )"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Payload:"),r.a.createElement("td",null,r.a.createElement("pre",null,r.a.createElement("code",null,(m.match(/.{1,30}/g)||[]).join("\n"))))))),r.a.createElement("div",{className:"text-right"},r.a.createElement(x.a,{variant:"primary",onClick:function(){return d(!E)}},"View JSON...")),r.a.createElement(B.a,{show:E,onHide:function(){return d(!E)},size:"lg",centered:!0},r.a.createElement(B.a.Header,{closeButton:!0},r.a.createElement(B.a.Title,null,"JSON")),r.a.createElement(B.a.Body,null,r.a.createElement("pre",null,r.a.createElement("code",null,JSON.stringify(t,null,2)))))))}},Y=a(66),P=a.n(Y),j=(a(106),function(){var e=function(){var e=Object(n.useContext)(y),t=e.dispatch;return Object(n.useEffect)((function(){var e=v()();return e.on("connect",(function(){t({type:"websocket.connected",socket:e})})),e.on("disconnect",(function(){t({type:"websocket.disconnected",socket:e})})),e.on("error",(function(e){console.error("Websocket error",e),t({type:"websocket.error",error:e})})),e.on("mesh.notif",(function(e){t({type:"mesh.notif",data:e})})),e.on("mesh.rfid.tag_update",(function(e){t({type:"mesh.rfid.tag_update",data:e})})),function(){e.close()}}),[t]),[e]}(),t=Object(s.a)(e,1)[0].state,a=t.websocket,c=t.messages;return r.a.createElement("div",{className:"app"},r.a.createElement(S.a,{bg:"light",expand:"lg",className:"page--header"},r.a.createElement(S.a.Brand,{href:"/"},r.a.createElement("img",{src:P.a,alt:"IoTechnics Logo",className:"page--header--logo"})),r.a.createElement(S.a.Text,{className:"justify-content-end page--header--text"},"SmartMesh Activity Viewer")),r.a.createElement(Q.a,{className:"p-4 page--content"},!a.connected&&r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(I.a,{variant:"danger",className:"text-center"},"Connection to server lost, please check the API is running and accessible"))),(!c||!c.length)&&r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(I.a,{variant:"info",className:"text-center"},"Waiting for SmartMesh messages..."))),c.map((function(e){var t=e.type,a=e.data,n=V[t]||V.unknown;return r.a.createElement(w.a,{className:"mb-2",key:a.id},r.a.createElement(O.a,null,r.a.createElement(n,{type:t,data:a})))}))))}),H=function(){return r.a.createElement(N,null,r.a.createElement(j,null))};l.a.render(r.a.createElement(H,null),document.getElementById("root"))},66:function(e,t){e.exports="data:image/png;base64,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"},67:function(e,t,a){e.exports=a(107)}},[[67,1,2]]]);
//# sourceMappingURL=main.422ef070.chunk.js.map